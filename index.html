<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoBoost: Unit 7 Mastery</title>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS ---
        const Icon = ({ children, size = 20, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const MapPin = (props) => <Icon {...props}><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></Icon>;
        const GitCommit = (props) => <Icon {...props}><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></Icon>;
        const CheckCircle = (props) => <Icon {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></Icon>;
        const XCircle = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></Icon>;
        const ArrowRight = (props) => <Icon {...props}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></Icon>;
        const Award = (props) => <Icon {...props}><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></Icon>;
        const Hash = (props) => <Icon {...props}><line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line></Icon>;
        const Info = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></Icon>;
        const RotateCcw = (props) => <Icon {...props}><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></Icon>;
        const BookOpen = (props) => <Icon {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></Icon>;
        const Grid = (props) => <Icon {...props}><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></Icon>;

        // --- DATA & CURRICULUM CONTENT ---

        const TOPICS = [
            {
                id: 'midpoint_distance',
                title: '7-1: Midpoint & Distance',
                icon: <MapPin size={20} />,
                description: 'Finding the middle and length of segments.',
                theory: (
                <div className="space-y-4 text-slate-700">
                    <h3 className="font-bold text-lg text-indigo-700">The Core Formulas</h3>
                    <div className="grid gap-4">
                        <div className="bg-white p-3 border rounded shadow-sm">
                            <h4 className="font-bold text-slate-800">1. Midpoint (The Average)</h4>
                            <p className="text-sm mb-2">To find the middle, just average the coordinates.</p>
                            <div className="bg-slate-100 p-2 rounded text-center font-mono text-sm">
                                M = ( <span className="text-blue-600">x‚ÇÅ+x‚ÇÇ</span> / 2 , <span className="text-green-600">y‚ÇÅ+y‚ÇÇ</span> / 2 )
                            </div>
                        </div>
                        <div className="bg-white p-3 border rounded shadow-sm">
                            <h4 className="font-bold text-slate-800">2. Distance (Pythagorean)</h4>
                            <p className="text-sm mb-2">Distance is just the hypotenuse of a right triangle.</p>
                            <div className="bg-slate-100 p-2 rounded text-center font-mono text-sm">
                                d = ‚àö[ (x‚ÇÇ-x‚ÇÅ)¬≤ + (y‚ÇÇ-y‚ÇÅ)¬≤ ]
                            </div>
                        </div>
                    </div>
                    <div className="bg-indigo-50 p-4 rounded-lg border border-indigo-200 text-sm">
                        <p><strong>Tip:</strong> Be careful with negatives! <br/> (4 - -1) becomes (4 + 1).</p>
                    </div>
                </div>
                ),
                questions: [
                    {
                        id: 1,
                        question: "Which formula is the Distance Formula?",
                        options: [
                            "(a+b)/2",
                            "‚àö(x‚ÇÇ-x‚ÇÅ)¬≤ + (y‚ÇÇ-y‚ÇÅ)¬≤",
                            "(x‚ÇÅ+x‚ÇÇ)/2, (y‚ÇÅ+y‚ÇÇ)/2",
                            "y = mx + b"
                        ],
                        correctIndex: 1,
                        explanation: "The Distance Formula comes from the Pythagorean Theorem (a¬≤ + b¬≤ = c¬≤). It uses the square root of the differences squared."
                    },
                    {
                        id: 2,
                        question: "Segment AB has endpoints at -7 and 5 on a number line. What is the coordinate of its midpoint?",
                        options: ["0", "-1", "1", "2"],
                        correctIndex: 1,
                        explanation: "Average them! (-7 + 5) / 2 = -2 / 2 = -1."
                    },
                    {
                        id: 3,
                        question: "Find the midpoint of segment EF with endpoints E(10, -2) and F(2, -4).",
                        options: ["(5, 2)", "(6, -3)", "(6, 3)", "(5, -2)"],
                        correctIndex: 1,
                        explanation: "Average the x's: (10+2)/2 = 6. Average the y's: (-2 + -4)/2 = -3. Midpoint is (6, -3)."
                    },
                    {
                        id: 4,
                        question: "What is the distance between U(-1, 9) and V(4, 7)?",
                        options: ["‚àö25", "‚àö29", "‚àö5", "7"],
                        correctIndex: 1,
                        explanation: "Change in x: 4 - (-1) = 5. Change in y: 7 - 9 = -2. Distance = ‚àö(5¬≤ + (-2)¬≤) = ‚àö(25 + 4) = ‚àö29."
                    }
                ]
            },
            {
                id: 'polygons',
                title: '7-2: Polygons in Coordinate Plane',
                icon: <Grid size={20} />,
                description: 'Classifying shapes using math.',
                theory: (
                <div className="space-y-4 text-slate-700">
                    <h3 className="font-bold text-lg text-indigo-700">Proof by Numbers</h3>
                    <p>We can identify shapes by calculating their side lengths (distance) and corner angles (slopes).</p>
                    <ul className="list-disc pl-5 space-y-2">
                        <li><strong>Isosceles Triangle:</strong> Use distance formula. If 2 sides are equal length, it's Isosceles.</li>
                        <li><strong>Right Triangle:</strong> Check slopes. If two sides are perpendicular (negative reciprocals), it's a Right triangle.</li>
                        <li><strong>Parallelogram:</strong> Opposite sides must have the same slope (parallel).</li>
                    </ul>
                </div>
                ),
                questions: [
                    {
                        id: 5,
                        question: "A triangle has vertices A(0,0), B(4,0), and C(2,4). Use distance formula to classify it.",
                        options: ["Scalene", "Isosceles", "Equilateral", "Right"],
                        correctIndex: 1,
                        explanation: "Distance AB = 4. Distance AC = ‚àö(2¬≤ + 4¬≤) = ‚àö20. Distance BC = ‚àö(2¬≤ + 4¬≤) = ‚àö20. Since AC = BC, it is Isosceles."
                    },
                    {
                        id: 6,
                        question: "Rectangle ABCD has points A(0,0), B(0,3), C(4,3). What must be the coordinates of D?",
                        options: ["(4, 0)", "(3, 4)", "(4, 4)", "(3, 0)"],
                        correctIndex: 0,
                        explanation: "To make a rectangle, D needs to be directly below C (x=4) and directly across from A (y=0). So D is (4,0)."
                    }
                ]
            },
            {
                id: 'slopes',
                title: '7-3: Parallel & Perpendicular',
                icon: <GitCommit size={20} />,
                description: 'Slopes of lines that never meet or meet at 90¬∞.',
                theory: (
                <div className="space-y-4 text-slate-700">
                    <h3 className="font-bold text-lg text-indigo-700">Slope Rules</h3>
                    <div className="grid gap-4">
                        <div className="bg-blue-50 p-3 rounded border border-blue-200">
                            <h4 className="font-bold text-blue-800">Parallel Lines ( || )</h4>
                            <p className="text-sm">They have the <strong>SAME</strong> slope.</p>
                            <p className="font-mono text-xs mt-1">m‚ÇÅ = 2, m‚ÇÇ = 2</p>
                        </div>
                        <div className="bg-pink-50 p-3 rounded border border-pink-200">
                            <h4 className="font-bold text-pink-800">Perpendicular Lines ( ‚ä• )</h4>
                            <p className="text-sm">Slopes are <strong>Negative Reciprocals</strong> (Flip & Switch Sign).</p>
                            <p className="font-mono text-xs mt-1">m‚ÇÅ = 2, m‚ÇÇ = -1/2</p>
                        </div>
                    </div>
                </div>
                ),
                questions: [
                    {
                        id: 11,
                        question: "Identify the equation of the line shown in a graph with y-intercept +3 and a slope of -2.",
                        options: ["y = -3x + 3", "y = -2x + 3", "y = 2x + 4", "y = 3x - 2"],
                        correctIndex: 1,
                        explanation: "Slope-intercept form is y = mx + b. m = -2, b = 3. So, y = -2x + 3."
                    },
                    {
                        id: 12,
                        question: "Fill in the blank: The slopes of parallel lines will be ________.",
                        options: ["negative reciprocals", "the same", "opposites", "undefined"],
                        correctIndex: 1,
                        explanation: "Parallel lines never touch, so they must rise and run at exactly the same rate."
                    },
                    {
                        id: 14,
                        question: "What is an equation of the line PARALLEL to y = -2x + 4 that contains the point (1, 1)?",
                        options: ["y = 2x + 4", "y = 3x + 4", "y = 2x - 4", "y = -2x + 3"],
                        correctIndex: 3,
                        explanation: "Parallel means same slope, so m = -2. Use point-slope: y - 1 = -2(x - 1). Simplify: y = -2x + 2 + 1 ‚Üí y = -2x + 3."
                    },
                    {
                        id: 15,
                        question: "Line A has slope 3. Line B has slope -1/3. Are they perpendicular?",
                        options: ["Yes", "No"],
                        correctIndex: 0,
                        explanation: "Multiply them: 3 * (-1/3) = -1. Since the product is -1 (or they are flipped with opposite signs), they are perpendicular."
                    }
                ]
            }
        ];

        // --- VISUALIZERS ---

        const DistanceVisualizer = ({ highlight }) => (
            <div className="w-full h-48 bg-white rounded-lg border border-slate-200 relative mb-4 overflow-hidden">
                <div className="absolute inset-0 opacity-10" style={{backgroundImage: 'radial-gradient(#6366f1 1px, transparent 1px)', backgroundSize: '20px 20px'}}></div>
                <svg className="w-full h-full" viewBox="0 0 300 150">
                    {/* Triangle */}
                    <path d="M50,120 L250,120 L250,20 Z" fill="rgba(99, 102, 241, 0.1)" stroke="none" />
                    
                    {/* Run */}
                    <line x1="50" y1="120" x2="250" y2="120" stroke="#3b82f6" strokeWidth="3" strokeDasharray={highlight ? "5,5" : "0"} />
                    <text x="150" y="140" fill="#3b82f6" fontSize="12" fontWeight="bold">Run (x‚ÇÇ-x‚ÇÅ)</text>
                    
                    {/* Rise */}
                    <line x1="250" y1="120" x2="250" y2="20" stroke="#ef4444" strokeWidth="3" strokeDasharray={highlight ? "5,5" : "0"} />
                    <text x="260" y="70" fill="#ef4444" fontSize="12" fontWeight="bold" style={{writingMode: "vertical-rl"}}>Rise (y‚ÇÇ-y‚ÇÅ)</text>

                    {/* Hypotenuse */}
                    <line x1="50" y1="120" x2="250" y2="20" stroke="#10b981" strokeWidth="4" />
                    <text x="130" y="60" fill="#10b981" fontSize="14" fontWeight="bold">Distance (d)</text>

                    {/* Points */}
                    <circle cx="50" cy="120" r="4" fill="#1e293b" />
                    <text x="30" y="125" fontSize="12">P‚ÇÅ</text>
                    <circle cx="250" cy="20" r="4" fill="#1e293b" />
                    <text x="260" y="20" fontSize="12">P‚ÇÇ</text>
                </svg>
            </div>
        );

        const ProgressBar = ({ current, total }) => {
            const width = `${(current / total) * 100}%`;
            return (
                <div className="w-full bg-slate-200 h-2 rounded-full overflow-hidden mt-2">
                    <div className="bg-indigo-600 h-full transition-all duration-500" style={{ width }}></div>
                </div>
            );
        };

        // --- MAIN APP COMPONENT ---

        function Unit7Prep() {
            const [view, setView] = useState('home'); // home, learn, practice
            const [activeTopicId, setActiveTopicId] = useState(null);
            const [currentQuestionIdx, setCurrentQuestionIdx] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [isCorrect, setIsCorrect] = useState(null);
            const [showExplanation, setShowExplanation] = useState(false);
            const [score, setScore] = useState(0);
            const [streak, setStreak] = useState(0);

            const activeTopic = TOPICS.find(t => t.id === activeTopicId);

            // Reset question state
            useEffect(() => {
                setSelectedAnswer(null);
                setIsCorrect(null);
                setShowExplanation(false);
            }, [currentQuestionIdx, activeTopicId]);

            const handleTopicSelect = (topicId, mode) => {
                setActiveTopicId(topicId);
                setCurrentQuestionIdx(0);
                setScore(0);
                setStreak(0);
                setView(mode);
            };

            const handleAnswerClick = (index) => {
                if (selectedAnswer !== null) return;

                setSelectedAnswer(index);
                const correct = index === activeTopic.questions[currentQuestionIdx].correctIndex;
                setIsCorrect(correct);
                setShowExplanation(true);

                if (correct) {
                    setScore(score + 10 + (streak * 2));
                    setStreak(streak + 1);
                } else {
                    setStreak(0);
                }
            };

            const handleNext = () => {
                if (currentQuestionIdx < activeTopic.questions.length - 1) {
                    setCurrentQuestionIdx(currentQuestionIdx + 1);
                } else {
                    setView('results');
                }
            };

            // --- VIEWS ---

            const renderHome = () => (
                <div className="max-w-3xl mx-auto p-6">
                    <div className="text-center mb-10">
                    <h1 className="text-4xl font-extrabold text-indigo-900 mb-2">Geometry Unit 7 Prep</h1>
                    <p className="text-slate-600">Midpoints, Distance, Polygons & Slopes.</p>
                    </div>

                    <div className="grid md:grid-cols-3 gap-6">
                    {TOPICS.map((topic) => (
                        <div key={topic.id} className="bg-white rounded-xl shadow-md border border-slate-100 p-6 hover:shadow-lg transition-shadow flex flex-col h-full">
                        <div className="flex items-center gap-3 mb-3 text-indigo-600">
                            {topic.icon}
                            <h2 className="font-bold text-lg leading-tight">{topic.title}</h2>
                        </div>
                        <p className="text-sm text-slate-500 mb-6 flex-grow">{topic.description}</p>
                        <div className="flex flex-col gap-2">
                            <button 
                            onClick={() => handleTopicSelect(topic.id, 'learn')}
                            className="w-full bg-indigo-50 text-indigo-700 py-2 rounded-lg font-medium hover:bg-indigo-100 transition-colors"
                            >
                            Learn
                            </button>
                            <button 
                            onClick={() => handleTopicSelect(topic.id, 'practice')}
                            className="w-full bg-indigo-600 text-white py-2 rounded-lg font-medium hover:bg-indigo-700 transition-colors"
                            >
                            Quiz
                            </button>
                        </div>
                        </div>
                    ))}
                    </div>
                </div>
            );

            const renderLearn = () => (
                <div className="max-w-2xl mx-auto p-6">
                    <button onClick={() => setView('home')} className="flex items-center text-slate-500 hover:text-slate-800 mb-6">
                    <RotateCcw size={16} className="mr-2" /> Back to Menu
                    </button>

                    <div className="bg-white rounded-2xl shadow-xl overflow-hidden">
                    <div className="bg-indigo-600 p-6 text-white">
                        <h2 className="text-2xl font-bold flex items-center gap-3">
                        <BookOpen size={24} />
                        {activeTopic.title}
                        </h2>
                    </div>
                    
                    <div className="p-8">
                        {activeTopic.theory}

                        <div className="mt-8 flex justify-end">
                        <button 
                            onClick={() => setView('practice')}
                            className="flex items-center bg-green-600 text-white px-6 py-3 rounded-full font-bold hover:bg-green-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all"
                        >
                            I'm Ready to Quiz <ArrowRight size={20} className="ml-2" />
                        </button>
                        </div>
                    </div>
                    </div>
                </div>
            );

            const renderPractice = () => {
                const question = activeTopic.questions[currentQuestionIdx];

                return (
                    <div className="max-w-2xl mx-auto p-4 md:p-6">
                    {/* Header */}
                    <div className="flex justify-between items-center mb-6">
                        <button onClick={() => setView('home')} className="text-slate-400 hover:text-slate-600">
                        <XCircle size={24} />
                        </button>
                        <div className="flex items-center gap-4">
                        <div className="bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-sm font-bold">
                            Streak: {streak} üî•
                        </div>
                        <div className="text-slate-600 font-medium">
                            Score: {score}
                        </div>
                        </div>
                    </div>

                    {/* Progress */}
                    <div className="mb-6">
                        <div className="flex justify-between text-xs text-slate-400 uppercase tracking-wider mb-1">
                        <span>Question {currentQuestionIdx + 1} of {activeTopic.questions.length}</span>
                        <span>{activeTopic.title}</span>
                        </div>
                        <ProgressBar current={currentQuestionIdx + 1} total={activeTopic.questions.length} />
                    </div>

                    {/* Question Card */}
                    <div className="bg-white rounded-2xl shadow-lg border border-slate-100 overflow-hidden relative">
                        <div className="p-6 md:p-8">
                        <h3 className="text-lg md:text-xl font-medium text-slate-800 mb-6 leading-relaxed">
                            {question.question}
                        </h3>

                        {/* Interactive Visual for Topic 1 */}
                        {activeTopic.id === 'midpoint_distance' && (
                            <DistanceVisualizer highlight={showExplanation} />
                        )}

                        <div className="space-y-3">
                            {question.options.map((option, idx) => {
                            let btnClass = "w-full text-left p-4 rounded-xl border-2 transition-all duration-200 flex justify-between items-center group ";
                            
                            if (selectedAnswer === null) {
                                btnClass += "border-slate-100 hover:border-indigo-300 hover:bg-indigo-50 cursor-pointer";
                            } else if (idx === question.correctIndex) {
                                btnClass += "border-green-500 bg-green-50 text-green-800";
                            } else if (selectedAnswer === idx) {
                                btnClass += "border-red-400 bg-red-50 text-red-800";
                            } else {
                                btnClass += "border-slate-100 opacity-50";
                            }

                            return (
                                <button
                                key={idx}
                                onClick={() => handleAnswerClick(idx)}
                                disabled={selectedAnswer !== null}
                                className={btnClass}
                                >
                                <span className="font-medium">{option}</span>
                                {selectedAnswer !== null && idx === question.correctIndex && <CheckCircle size={20} className="text-green-600" />}
                                {selectedAnswer === idx && idx !== question.correctIndex && <XCircle size={20} className="text-red-500" />}
                                </button>
                            );
                            })}
                        </div>
                        </div>

                        {/* Feedback Section */}
                        {showExplanation && (
                        <div className={`p-6 border-t ${isCorrect ? 'bg-green-50 border-green-100' : 'bg-orange-50 border-orange-100'}`}>
                            <div className="flex gap-3 mb-2">
                            {isCorrect ? (
                                <div className="p-2 bg-green-100 rounded-full h-fit text-green-600"><CheckCircle size={24} /></div>
                            ) : (
                                <div className="p-2 bg-orange-100 rounded-full h-fit text-orange-600"><Info size={24} /></div>
                            )}
                            <div>
                                <h4 className={`font-bold ${isCorrect ? 'text-green-800' : 'text-orange-800'}`}>
                                {isCorrect ? 'Correct!' : 'Not quite right'}
                                </h4>
                                <p className="text-slate-700 text-sm mt-1 leading-relaxed">{question.explanation}</p>
                            </div>
                            </div>
                            <div className="flex justify-end mt-4">
                            <button 
                                onClick={handleNext}
                                className="bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-indigo-700 transition-colors flex items-center"
                            >
                                {currentQuestionIdx < activeTopic.questions.length - 1 ? 'Next Question' : 'Finish Quiz'}
                                <ArrowRight size={18} className="ml-2" />
                            </button>
                            </div>
                        </div>
                        )}
                    </div>
                    </div>
                );
            };

            const renderResults = () => (
                <div className="max-w-md mx-auto p-8 text-center mt-10">
                    <div className="mb-6 inline-block p-6 rounded-full bg-yellow-100 text-yellow-600 shadow-inner">
                    <Award size={64} />
                    </div>
                    <h2 className="text-3xl font-bold text-slate-800 mb-2">Topic Complete!</h2>
                    <p className="text-slate-500 mb-8">You scored {score} points on {activeTopic.title}.</p>
                    
                    <div className="space-y-3">
                    <button 
                        onClick={() => {
                        setCurrentQuestionIdx(0);
                        setScore(0);
                        setStreak(0);
                        setView('practice');
                        }}
                        className="w-full bg-indigo-600 text-white py-3 rounded-xl font-bold hover:bg-indigo-700 transition-colors"
                    >
                        Try Again
                    </button>
                    <button 
                        onClick={() => setView('home')}
                        className="w-full bg-white text-slate-600 border border-slate-200 py-3 rounded-xl font-bold hover:bg-slate-50 transition-colors"
                    >
                        Choose Different Topic
                    </button>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-900">
                    {view === 'home' && renderHome()}
                    {view === 'learn' && renderLearn()}
                    {view === 'practice' && renderPractice()}
                    {view === 'results' && renderResults()}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<Unit7Prep />);
    </script>
</body>
</html>
