<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyMastery: Geometry Transformations</title>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .grid-line { stroke: #e2e8f0; stroke-width: 1; }
        .axis { stroke: #94a3b8; stroke-width: 2; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ICONS ---
        const Icon = ({ children, size = 20, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );
        const Move = (props) => <Icon {...props}><polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="19 9 22 12 19 15"/><polyline points="15 19 12 22 9 19"/><line x1="2" y1="12" x2="22" y2="12"/><line x1="12" y1="2" x2="12" y2="22"/></Icon>;
        const RefreshCw = (props) => <Icon {...props}><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></Icon>;
        const Layers = (props) => <Icon {...props}><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></Icon>;
        const CheckCircle = (props) => <Icon {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></Icon>;
        const XCircle = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></Icon>;
        const ArrowRight = (props) => <Icon {...props}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></Icon>;
        const Award = (props) => <Icon {...props}><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></Icon>;
        const Home = (props) => <Icon {...props}><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></Icon>;

        // --- VISUALIZER COMPONENT ---
        const GeometryVisualizer = ({ mode }) => {
            const [params, setParams] = useState({ x: 2, y: 1, dx: 3, dy: 2, angle: 0, reflectAxis: 'none' });
            
            // Base Triangle
            const A = { x: 2, y: 2 };
            const B = { x: 5, y: 2 };
            const C = { x: 2, y: 6 };

            // Helper to transform points
            const transform = (p) => {
                let newX = p.x;
                let newY = p.y;

                if (mode === 'translation') {
                    newX += params.dx;
                    newY += params.dy;
                } else if (mode === 'reflection') {
                    if (params.reflectAxis === 'x') newY = -newY;
                    if (params.reflectAxis === 'y') newX = -newX;
                } else if (mode === 'rotation') {
                    // Simple 90/180/270 rotation logic
                    if (params.angle === 90) { let temp = newX; newX = -newY; newY = temp; }
                    if (params.angle === 180) { newX = -newX; newY = -newY; }
                    if (params.angle === 270) { let temp = newX; newX = newY; newY = -temp; }
                }
                return { x: newX, y: newY };
            };

            const A_ = transform(A);
            const B_ = transform(B);
            const C_ = transform(C);

            // Grid scaling
            const scale = 20;
            const origin = 150; // Center of 300x300 svg

            const toSvg = (p) => ({ x: origin + p.x * scale, y: origin - p.y * scale });

            return (
                <div className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col items-center">
                    <div className="w-full flex justify-between mb-4">
                        <span className="font-bold text-slate-600 text-sm uppercase tracking-wider">Geometry Lab</span>
                        <div className="text-xs text-slate-400">Interact to explore</div>
                    </div>
                    
                    <svg width="300" height="300" className="bg-slate-50 rounded border border-slate-200 mb-4 cursor-crosshair">
                        {/* Grid Lines */}
                        {[...Array(15)].map((_, i) => (
                            <line key={`v${i}`} x1={i*20} y1="0" x2={i*20} y2="300" className="grid-line" />
                        ))}
                        {[...Array(15)].map((_, i) => (
                            <line key={`h${i}`} x1="0" y1={i*20} x2="300" y2={i*20} className="grid-line" />
                        ))}
                        {/* Axes */}
                        <line x1="150" y1="0" x2="150" y2="300" className="axis" />
                        <line x1="0" y1="150" x2="300" y2="150" className="axis" />

                        {/* Pre-Image (Blue) */}
                        <polygon 
                            points={`${toSvg(A).x},${toSvg(A).y} ${toSvg(B).x},${toSvg(B).y} ${toSvg(C).x},${toSvg(C).y}`} 
                            fill="rgba(59, 130, 246, 0.2)" stroke="#3b82f6" strokeWidth="2" 
                        />
                        <text x={toSvg(A).x-10} y={toSvg(A).y+15} className="text-[10px] fill-blue-600 font-bold">A</text>

                        {/* Image (Purple) */}
                        <polygon 
                            points={`${toSvg(A_).x},${toSvg(A_).y} ${toSvg(B_).x},${toSvg(B_).y} ${toSvg(C_).x},${toSvg(C_).y}`} 
                            fill="rgba(147, 51, 234, 0.2)" stroke="#9333ea" strokeWidth="2" strokeDasharray="4"
                        />
                        <text x={toSvg(A_).x-10} y={toSvg(A_).y+15} className="text-[10px] fill-purple-600 font-bold">A'</text>
                    </svg>

                    {/* Controls */}
                    <div className="w-full space-y-3 bg-slate-50 p-3 rounded-lg">
                        {mode === 'translation' && (
                            <>
                                <div className="flex items-center gap-2">
                                    <span className="text-xs font-bold w-8">X: {params.dx}</span>
                                    <input type="range" min="-8" max="8" value={params.dx} onChange={(e) => setParams({...params, dx: parseInt(e.target.value)})} className="w-full accent-indigo-600"/>
                                </div>
                                <div className="flex items-center gap-2">
                                    <span className="text-xs font-bold w-8">Y: {params.dy}</span>
                                    <input type="range" min="-8" max="8" value={params.dy} onChange={(e) => setParams({...params, dy: parseInt(e.target.value)})} className="w-full accent-indigo-600"/>
                                </div>
                                <p className="text-xs text-center text-slate-500 mt-1">Translation Vector &lt;{params.dx}, {params.dy}&gt;</p>
                            </>
                        )}
                        {mode === 'reflection' && (
                            <div className="flex justify-center gap-2">
                                <button onClick={() => setParams({...params, reflectAxis: 'x'})} className={`px-4 py-2 rounded text-sm font-bold ${params.reflectAxis === 'x' ? 'bg-indigo-600 text-white' : 'bg-white border'}`}>X-Axis</button>
                                <button onClick={() => setParams({...params, reflectAxis: 'y'})} className={`px-4 py-2 rounded text-sm font-bold ${params.reflectAxis === 'y' ? 'bg-indigo-600 text-white' : 'bg-white border'}`}>Y-Axis</button>
                            </div>
                        )}
                        {mode === 'rotation' && (
                            <div className="flex justify-center gap-2">
                                <button onClick={() => setParams({...params, angle: 90})} className={`px-3 py-2 rounded text-sm font-bold ${params.angle === 90 ? 'bg-indigo-600 text-white' : 'bg-white border'}`}>90°</button>
                                <button onClick={() => setParams({...params, angle: 180})} className={`px-3 py-2 rounded text-sm font-bold ${params.angle === 180 ? 'bg-indigo-600 text-white' : 'bg-white border'}`}>180°</button>
                                <button onClick={() => setParams({...params, angle: 270})} className={`px-3 py-2 rounded text-sm font-bold ${params.angle === 270 ? 'bg-indigo-600 text-white' : 'bg-white border'}`}>270°</button>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // --- DATA & CURRICULUM ---
        const TOPICS = [
            {
                id: 'translations',
                title: 'Translations & Rigid Motion',
                icon: <Move size={20} />,
                description: 'Moving shapes without changing size or shape.',
                visualizerMode: 'translation',
                theory: (
                    <div className="space-y-4 text-slate-700">
                        <div className="bg-indigo-50 border-l-4 border-indigo-500 p-4 rounded">
                            <h3 className="font-bold text-indigo-900">What is a Rigid Motion?</h3>
                            <p className="text-sm">A transformation that preserves both <strong>distance</strong> (side lengths) and <strong>angle measure</strong>. Translations, reflections, and rotations are all rigid motions.</p>
                        </div>
                        
                        <h4 className="font-bold text-lg mt-4">Translation Rules</h4>
                        <p className="text-sm">A translation slides a figure. We can write this as a vector <code className="bg-slate-100 px-1 py-0.5 rounded font-mono text-pink-600">&lt;a, b&gt;</code> or a coordinate rule:</p>
                        
                        <div className="bg-white p-3 border rounded text-center font-mono text-sm shadow-sm">
                            (x, y) → (x + a, y + b)
                        </div>
                        
                        <ul className="list-disc list-inside text-sm space-y-1 ml-2">
                            <li><strong>a</strong> moves it left (-) or right (+).</li>
                            <li><strong>b</strong> moves it down (-) or up (+).</li>
                        </ul>
                    </div>
                ),
                questions: [
                    {
                        id: 1,
                        question: "If a triangle is translated by vector <-3, 4>, what happens to its position?",
                        options: [
                            "Right 3, Up 4",
                            "Left 3, Up 4",
                            "Left 3, Down 4",
                            "Right 3, Down 4"
                        ],
                        correctIndex: 1,
