<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoBoost: Right Triangles & Trig</title>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS ---
        const Icon = ({ children, size = 20, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const TriangleIcon = (props) => <Icon {...props}><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/></Icon>;
        const Ruler = (props) => <Icon {...props}><path d="M2 12h20"/><path d="M5 12v-2"/><path d="M9 12v-4"/><path d="M13 12v-2"/><path d="M17 12v-4"/></Icon>;
        const Eye = (props) => <Icon {...props}><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></Icon>;
        const CheckCircle = (props) => <Icon {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></Icon>;
        const XCircle = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></Icon>;
        const ArrowRight = (props) => <Icon {...props}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></Icon>;
        const Award = (props) => <Icon {...props}><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></Icon>;
        const Info = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></Icon>;
        const RotateCcw = (props) => <Icon {...props}><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></Icon>;
        const BookOpen = (props) => <Icon {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></Icon>;
        const Activity = (props) => <Icon {...props}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></Icon>;

        // --- DATA & CURRICULUM CONTENT ---

        const TOPICS = [
            {
                id: 'pythag_converse',
                title: '4-1: Pythagorean Theorem & Converse',
                icon: <TriangleIcon size={20} />,
                description: 'Is it Right, Acute, or Obtuse?',
                theory: (
                <div className="space-y-4 text-slate-700">
                    <h3 className="font-bold text-lg text-indigo-700">The Rules of the Sides</h3>
                    <p>You know $a^2 + b^2 = c^2$ means it's a <strong>Right Triangle</strong>. But what if they aren't equal?</p>
                    
                    <div className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm space-y-3">
                        <div className="flex items-center gap-3">
                            <span className="bg-green-100 text-green-800 font-bold px-2 py-1 rounded text-sm">Right</span>
                            <span>$c^2 = a^2 + b^2$</span>
                        </div>
                        <div className="flex items-center gap-3">
                            <span className="bg-orange-100 text-orange-800 font-bold px-2 py-1 rounded text-sm">Obtuse</span>
                            <span>$c^2 > a^2 + b^2$ (Big side stretches it open)</span>
                        </div>
                        <div className="flex items-center gap-3">
                            <span className="bg-blue-100 text-blue-800 font-bold px-2 py-1 rounded text-sm">Acute</span>
                            <span>$c^2 &lt; a^2 + b^2$ (Small side keeps it closed)</span>
                        </div>
                    </div>
                    <p className="text-sm italic text-slate-500">Note: 'c' is ALWAYS the longest side!</p>
                </div>
                ),
                questions: [
                    {
                        id: 1,
                        question: "A triangle has side lengths 6, 8, and 12. Classify the triangle.",
                        options: ["Right", "Acute", "Obtuse", "Not a triangle"],
                        correctIndex: 2,
                        explanation: "Compare cÂ² to aÂ² + bÂ². Longest side is 12. 12Â² = 144. Other sides: 6Â² + 8Â² = 36 + 64 = 100. Since 144 > 100, the big side stretches the triangle open. It is Obtuse."
                    },
                    {
                        id: 2,
                        question: "A triangle has side lengths 5, 12, and 13. Classify it.",
                        options: ["Right", "Acute", "Obtuse", "Isosceles"],
                        correctIndex: 0,
                        explanation: "Check the squares: 13Â² = 169. 5Â² + 12Â² = 25 + 144 = 169. Since 169 = 169, it is a Right Triangle."
                    },
                    {
                        id: 3,
                        question: "Which equation represents the Converse of the Pythagorean Theorem for an Acute triangle?",
                        options: ["cÂ² = aÂ² + bÂ²", "cÂ² > aÂ² + bÂ²", "cÂ² < aÂ² + bÂ²", "a + b < c"],
                        correctIndex: 2,
                        explanation: "For an acute triangle, the longest side squared must be SMALLER than the sum of the other squares."
                    }
                ]
            },
            {
                id: 'trig',
                title: '4-3: Trigonometry (SOH CAH TOA)',
                icon: <Activity size={20} />,
                description: 'Sine, Cosine, and Tangent ratios.',
                theory: (
                <div className="space-y-4 text-slate-700">
                    <h3 className="font-bold text-lg text-indigo-700">SOH - CAH - TOA</h3>
                    <p>These are just fancy names for fractions comparing sides of a triangle.</p>
                    <div className="grid grid-cols-3 gap-2 text-center text-sm">
                        <div className="bg-indigo-50 p-2 rounded border border-indigo-200">
                            <strong className="block text-indigo-800 mb-1">SOH</strong>
                            Sin = <span className="italic">Opp / Hyp</span>
                        </div>
                        <div className="bg-pink-50 p-2 rounded border border-pink-200">
                            <strong className="block text-pink-800 mb-1">CAH</strong>
                            Cos = <span className="italic">Adj / Hyp</span>
                        </div>
                        <div className="bg-teal-50 p-2 rounded border border-teal-200">
                            <strong className="block text-teal-800 mb-1">TOA</strong>
                            Tan = <span className="italic">Opp / Adj</span>
                        </div>
                    </div>
                </div>
                ),
                questions: [
                    {
                        id: 4,
                        question: "In a right triangle, which ratio represents the Tangent?",
                        options: ["Opposite / Hypotenuse", "Adjacent / Hypotenuse", "Opposite / Adjacent", "Hypotenuse / Opposite"],
                        correctIndex: 2,
                        explanation: "Remember TOA: Tangent = Opposite over Adjacent."
                    },
                    {
                        id: 5,
                        question: "You are looking for the 'Opposite' leg and you have the 'Hypotenuse'. Which trig function should you use?",
                        options: ["Sine", "Cosine", "Tangent", "Pythagorean"],
                        correctIndex: 0,
                        explanation: "You have Opp and Hyp. That spells SOH. Use Sine."
                    },
                    {
                        id: 6,
                        question: "Find x if tan(x) = 1. (Hint: When are the legs equal?)",
                        options: ["30Â°", "45Â°", "60Â°", "90Â°"],
                        correctIndex: 1,
                        explanation: "Tan is Opp/Adj. If the ratio is 1, the legs are the same length. This happens in a 45-45-90 triangle."
                    }
                ]
            },
            {
                id: 'elevation_depression',
                title: '4-4: Elevation & Depression',
                icon: <Eye size={20} />,
                description: 'Looking up and looking down.',
                theory: (
                <div className="space-y-4 text-slate-700">
                    <h3 className="font-bold text-lg text-indigo-700">The "Z" Rule</h3>
                    <p>A common mistake is putting the Angle of Depression in the wrong place!</p>
                    <ul className="list-disc pl-5 space-y-2">
                        <li><strong>Angle of Elevation:</strong> Looking UP from the ground.</li>
                        <li><strong>Angle of Depression:</strong> Looking DOWN from the sky (measured from a horizontal line, NOT the vertical wall).</li>
                    </ul>
                    <div className="bg-yellow-50 p-3 rounded border border-yellow-200 text-sm font-bold">
                        Secret Hack: The Angle of Depression equals the Angle of Elevation. (Alternate Interior Angles).
                    </div>
                </div>
                ),
                questions: [
                    {
                        id: 7,
                        question: "A bird sits on a wire 50 ft high. It looks down at a worm with an angle of depression of 40Â°. Which angle inside the triangle is also 40Â°?",
                        options: ["The top angle (by the bird)", "The bottom angle (by the worm)", "The right angle", "None of them"],
                        correctIndex: 1,
                        explanation: "The Angle of Depression (from the sky horizontal) is congruent to the Angle of Elevation (from the ground). The angle by the worm is 40Â°."
                    },
                    {
                        id: 8,
                        question: "A ladder leans against a wall. The foot of the ladder is 10 ft from the wall. The angle of elevation is 60Â°. Which trig function finds the ladder length?",
                        options: ["Sin(60) = 10/x", "Cos(60) = 10/x", "Tan(60) = x/10", "Cos(60) = x/10"],
                        correctIndex: 1,
                        explanation: "10 is the Adjacent side. The ladder is the Hypotenuse. Adj + Hyp = Cosine. Cos(60) = 10 / x."
                    }
                ]
            }
        ];

        // --- VISUALIZERS ---

        const TriangleVisualizer = ({ highlight }) => {
            // A visual showing acute vs obtuse
            return (
                <div className="w-full h-48 bg-white rounded-lg border border-slate-200 relative mb-4 overflow-hidden flex items-center justify-center">
                    <div className="text-center relative w-full h-full">
                         <svg viewBox="0 0 300 150" className="w-full h-full">
                            {/* Base */}
                            <line x1="50" y1="130" x2="200" y2="130" stroke="#334155" strokeWidth="4" />
                            <text x="125" y="145" fontSize="12" fill="#334155">Side a</text>

                            {/* Side b (Fixed) */}
                            <line x1="50" y1="130" x2="50" y2="50" stroke="#334155" strokeWidth="4" />
                            <text x="30" y="90" fontSize="12" fill="#334155">Side b</text>

                            {/* Side c (Hypotenuse - changes color) */}
                            <line x1="50" y1="50" x2="200" y2="130" stroke={highlight ? "#ef4444" : "#10b981"} strokeWidth="4" strokeDasharray={highlight ? "5,5" : "0"}/>
                            <text x="130" y="80" fontSize="14" fill={highlight ? "#ef4444" : "#10b981"} fontWeight="bold">Side c</text>

                            {/* Annotation */}
                            <text x="210" y="50" fontSize="12" fill="#64748b">
                                If cÂ² = aÂ² + bÂ² â†’ Right
                            </text>
                             <text x="210" y="70" fontSize="12" fill="#64748b">
                                If cÂ² > aÂ² + bÂ² â†’ Obtuse
                            </text>
                        </svg>
                    </div>
                </div>
            )
        }

        const ElevationVisualizer = () => (
             <div className="w-full h-40 bg-sky-50 rounded-lg border border-sky-200 relative mb-4 overflow-hidden">
                <svg viewBox="0 0 300 150" className="w-full h-full">
                    {/* Horizontal Top */}
                    <line x1="50" y1="30" x2="250" y2="30" stroke="#94a3b8" strokeWidth="2" strokeDasharray="5,5" />
                    <text x="180" y="25" fontSize="10" fill="#64748b">Horizontal (Eye Level)</text>

                    {/* Ground */}
                    <line x1="50" y1="130" x2="250" y2="130" stroke="#166534" strokeWidth="3" />

                    {/* Transversal (Sight Line) */}
                    <line x1="50" y1="30" x2="250" y2="130" stroke="#2563eb" strokeWidth="2" />

                    {/* Angles */}
                    <path d="M80,30 A30,30 0 0,1 75,45" fill="none" stroke="#ef4444" strokeWidth="2" />
                    <text x="90" y="50" fontSize="10" fill="#ef4444">Depression</text>

                    <path d="M220,130 A30,30 0 0,0 225,115" fill="none" stroke="#16a34a" strokeWidth="2" />
                    <text x="180" y="120" fontSize="10" fill="#16a34a">Elevation</text>

                    <text x="100" y="90" fontSize="14" fontWeight="bold" fill="#334155">ANGLES ARE EQUAL!</text>
                </svg>
             </div>
        );

        const ProgressBar = ({ current, total }) => {
            const width = `${(current / total) * 100}%`;
            return (
                <div className="w-full bg-slate-200 h-2 rounded-full overflow-hidden mt-2">
                    <div className="bg-indigo-600 h-full transition-all duration-500" style={{ width }}></div>
                </div>
            );
        };

        // --- MAIN APP COMPONENT ---

        function TrigPrep() {
            const [view, setView] = useState('home'); // home, learn, practice
            const [activeTopicId, setActiveTopicId] = useState(null);
            const [currentQuestionIdx, setCurrentQuestionIdx] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [isCorrect, setIsCorrect] = useState(null);
            const [showExplanation, setShowExplanation] = useState(false);
            const [score, setScore] = useState(0);
            const [streak, setStreak] = useState(0);

            const activeTopic = TOPICS.find(t => t.id === activeTopicId);

            // Reset question state
            useEffect(() => {
                setSelectedAnswer(null);
                setIsCorrect(null);
                setShowExplanation(false);
            }, [currentQuestionIdx, activeTopicId]);

            const handleTopicSelect = (topicId, mode) => {
                setActiveTopicId(topicId);
                setCurrentQuestionIdx(0);
                setScore(0);
                setStreak(0);
                setView(mode);
            };

            const handleAnswerClick = (index) => {
                if (selectedAnswer !== null) return;

                setSelectedAnswer(index);
                const correct = index === activeTopic.questions[currentQuestionIdx].correctIndex;
                setIsCorrect(correct);
                setShowExplanation(true);

                if (correct) {
                    setScore(score + 10 + (streak * 2));
                    setStreak(streak + 1);
                } else {
                    setStreak(0);
                }
            };

            const handleNext = () => {
                if (currentQuestionIdx < activeTopic.questions.length - 1) {
                    setCurrentQuestionIdx(currentQuestionIdx + 1);
                } else {
                    setView('results');
                }
            };

            // --- VIEWS ---

            const renderHome = () => (
                <div className="max-w-3xl mx-auto p-6">
                    <div className="text-center mb-10">
                    <h1 className="text-4xl font-extrabold text-indigo-900 mb-2">TrigMastery</h1>
                    <p className="text-slate-600">Unit 4: Right Triangles, Trigonometry, and Real World Angles.</p>
                    </div>

                    <div className="grid md:grid-cols-3 gap-6">
                    {TOPICS.map((topic) => (
                        <div key={topic.id} className="bg-white rounded-xl shadow-md border border-slate-100 p-6 hover:shadow-lg transition-shadow flex flex-col h-full">
                        <div className="flex items-center gap-3 mb-3 text-indigo-600">
                            {topic.icon}
                            <h2 className="font-bold text-lg leading-tight">{topic.title}</h2>
                        </div>
                        <p className="text-sm text-slate-500 mb-6 flex-grow">{topic.description}</p>
                        <div className="flex flex-col gap-2">
                            <button 
                            onClick={() => handleTopicSelect(topic.id, 'learn')}
                            className="w-full bg-indigo-50 text-indigo-700 py-2 rounded-lg font-medium hover:bg-indigo-100 transition-colors"
                            >
                            Learn
                            </button>
                            <button 
                            onClick={() => handleTopicSelect(topic.id, 'practice')}
                            className="w-full bg-indigo-600 text-white py-2 rounded-lg font-medium hover:bg-indigo-700 transition-colors"
                            >
                            Quiz
                            </button>
                        </div>
                        </div>
                    ))}
                    </div>
                </div>
            );

            const renderLearn = () => (
                <div className="max-w-2xl mx-auto p-6">
                    <button onClick={() => setView('home')} className="flex items-center text-slate-500 hover:text-slate-800 mb-6">
                    <RotateCcw size={16} className="mr-2" /> Back to Menu
                    </button>

                    <div className="bg-white rounded-2xl shadow-xl overflow-hidden">
                    <div className="bg-indigo-600 p-6 text-white">
                        <h2 className="text-2xl font-bold flex items-center gap-3">
                        <BookOpen size={24} />
                        {activeTopic.title}
                        </h2>
                    </div>
                    
                    <div className="p-8">
                        {activeTopic.theory}

                        <div className="mt-8 flex justify-end">
                        <button 
                            onClick={() => setView('practice')}
                            className="flex items-center bg-green-600 text-white px-6 py-3 rounded-full font-bold hover:bg-green-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all"
                        >
                            I'm Ready to Quiz <ArrowRight size={20} className="ml-2" />
                        </button>
                        </div>
                    </div>
                    </div>
                </div>
            );

            const renderPractice = () => {
                const question = activeTopic.questions[currentQuestionIdx];

                return (
                    <div className="max-w-2xl mx-auto p-4 md:p-6">
                    {/* Header */}
                    <div className="flex justify-between items-center mb-6">
                        <button onClick={() => setView('home')} className="text-slate-400 hover:text-slate-600">
                        <XCircle size={24} />
                        </button>
                        <div className="flex items-center gap-4">
                        <div className="bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-sm font-bold">
                            Streak: {streak} ðŸ”¥
                        </div>
                        <div className="text-slate-600 font-medium">
                            Score: {score}
                        </div>
                        </div>
                    </div>

                    {/* Progress */}
                    <div className="mb-6">
                        <div className="flex justify-between text-xs text-slate-400 uppercase tracking-wider mb-1">
                        <span>Question {currentQuestionIdx + 1} of {activeTopic.questions.length}</span>
                        <span>{activeTopic.title}</span>
                        </div>
                        <ProgressBar current={currentQuestionIdx + 1} total={activeTopic.questions.length} />
                    </div>

                    {/* Question Card */}
                    <div className="bg-white rounded-2xl shadow-lg border border-slate-100 overflow-hidden relative">
                        <div className="p-6 md:p-8">
                        <h3 className="text-lg md:text-xl font-medium text-slate-800 mb-6 leading-relaxed">
                            {question.question}
                        </h3>

                        {/* Visualizers */}
                        {activeTopic.id === 'pythag_converse' && (
                            <TriangleVisualizer highlight={showExplanation} />
                        )}
                        {activeTopic.id === 'elevation_depression' && (
                            <ElevationVisualizer />
                        )}

                        <div className="space-y-3">
                            {question.options.map((option, idx) => {
                            let btnClass = "w-full text-left p-4 rounded-xl border-2 transition-all duration-200 flex justify-between items-center group ";
                            
                            if (selectedAnswer === null) {
                                btnClass += "border-slate-100 hover:border-indigo-300 hover:bg-indigo-50 cursor-pointer";
                            } else if (idx === question.correctIndex) {
                                btnClass += "border-green-500 bg-green-50 text-green-800";
                            } else if (selectedAnswer === idx) {
                                btnClass += "border-red-400 bg-red-50 text-red-800";
                            } else {
                                btnClass += "border-slate-100 opacity-50";
                            }

                            return (
                                <button
                                key={idx}
                                onClick={() => handleAnswerClick(idx)}
                                disabled={selectedAnswer !== null}
                                className={btnClass}
                                >
                                <span className="font-medium">{option}</span>
                                {selectedAnswer !== null && idx === question.correctIndex && <CheckCircle size={20} className="text-green-600" />}
                                {selectedAnswer === idx && idx !== question.correctIndex && <XCircle size={20} className="text-red-500" />}
                                </button>
                            );
                            })}
                        </div>
                        </div>

                        {/* Feedback Section */}
                        {showExplanation && (
                        <div className={`p-6 border-t ${isCorrect ? 'bg-green-50 border-green-100' : 'bg-orange-50 border-orange-100'}`}>
                            <div className="flex gap-3 mb-2">
                            {isCorrect ? (
                                <div className="p-2 bg-green-100 rounded-full h-fit text-green-600"><CheckCircle size={24} /></div>
                            ) : (
                                <div className="p-2 bg-orange-100 rounded-full h-fit text-orange-600"><Info size={24} /></div>
                            )}
                            <div>
                                <h4 className={`font-bold ${isCorrect ? 'text-green-800' : 'text-orange-800'}`}>
                                {isCorrect ? 'Correct!' : 'Not quite right'}
                                </h4>
                                <p className="text-slate-700 text-sm mt-1 leading-relaxed">{question.explanation}</p>
                            </div>
                            </div>
                            <div className="flex justify-end mt-4">
                            <button 
                                onClick={handleNext}
                                className="bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-indigo-700 transition-colors flex items-center"
                            >
                                {currentQuestionIdx < activeTopic.questions.length - 1 ? 'Next Question' : 'Finish Quiz'}
                                <ArrowRight size={18} className="ml-2" />
                            </button>
                            </div>
                        </div>
                        )}
                    </div>
                    </div>
                );
            };

            const renderResults = () => (
                <div className="max-w-md mx-auto p-8 text-center mt-10">
                    <div className="mb-6 inline-block p-6 rounded-full bg-yellow-100 text-yellow-600 shadow-inner">
                    <Award size={64} />
                    </div>
                    <h2 className="text-3xl font-bold text-slate-800 mb-2">Topic Complete!</h2>
                    <p className="text-slate-500 mb-8">You scored {score} points on {activeTopic.title}.</p>
                    
                    <div className="space-y-3">
                    <button 
                        onClick={() => {
                        setCurrentQuestionIdx(0);
                        setScore(0);
                        setStreak(0);
                        setView('practice');
                        }}
                        className="w-full bg-indigo-600 text-white py-3 rounded-xl font-bold hover:bg-indigo-700 transition-colors"
                    >
                        Try Again
                    </button>
                    <button 
                        onClick={() => setView('home')}
                        className="w-full bg-white text-slate-600 border border-slate-200 py-3 rounded-xl font-bold hover:bg-slate-50 transition-colors"
                    >
                        Choose Different Topic
                    </button>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-900">
                    {view === 'home' && renderHome()}
                    {view === 'learn' && renderLearn()}
                    {view === 'practice' && renderPractice()}
                    {view === 'results' && renderResults()}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TrigPrep />);
    </script>
</body>
</html>
